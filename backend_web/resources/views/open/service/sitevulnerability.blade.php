@extends("open.open-layout")

@section("pagetitle",$seo["title"])
@section("pagedescription",$seo["description"])
@section("pagekeywords",$seo["keywords"])

@section("container")
<script>
const result = JSON.parse(`{!! json_encode($result) !!}`)
//alert(result)
</script>
<div class="card opn-card">
    <div class="card-header">
        <h2 class="card-title mt-2">{{$seo["description"]}}</h2>
        <h6>Es una recopilación de los ataques más comúnes que sufren las aplicaciones web</h6>
        <h6>Se probará un total de {{ count($result) }} vulnerabilidades</h6>
    </div>
    @verbatim
    <div class="card-body">
        <form @submit="on_submit" id="form-sitevulnerability" class="row g-3">
            <div class="col-sm-9">
                <label>Dominio:</label>
                <input type="text" class="form-control" required="required" placeholder="https://midominio.com"
                    ref="domain"
                    :disabled="issending"
                    v-model="domain"
                />
            </div>
            <!-- boton -->
            <div class="col-sm-2 m-0 p-0 pt-4">
                <button id="btn-generate" class="btn btn-dark m-0 mt-3" :disabled="issending" >
                    {{btnsend}}
                    <img v-if="issending" src="/assets/images/loading-bw.gif" width="25" height="25"/>
                </button>
            </div>
            <h3 v-if="test.length && !result.length">Pruebas</h3>
            <div class="list-group">
                <li target="_blank" class="list-group-item list-group-item-action"
                   v-for="(res,i) in test"
                >
                    <small>{{i+1}} - {{res.request_uri}}</small>
                </li>
            </div>
            <h3 v-if="result.length">Resultado</h3>
            <div class="list-group">
                <a target="_blank" class="list-group-item list-group-item-action list-group-item-info"
                   v-for="(res,i) in result"
                   :href="res.request_uri"
                >
                    <small>{{i+1}} - {{res.hack_uri}} - <b>{{res.status}}</b></small>
                </a>
            </div>
        </form>
    </div>
</div>
@endverbatim
<script type="module" src="/js/open/service/vue-sitevulnerability.js"></script>
@endsection
